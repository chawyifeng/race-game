<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Racing Start Timer - Admin Login</title>
    <link
      rel="icon"
      sizes="600x600"
      href="https://cdn.glitch.com/e0396011-48ac-44c9-bf55-6e11b025757d%2Fflag.png?1500283332796"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <style>
      #mylink {
        font-size: 25px;
      }
    </style>
  </head>

  <body align="center">
    <header>
      <h1>Login</h1>
    </header>

    <form id="loginForm" action="/login" method="POST">
      <fieldset>
        <label>Username</label>
        <input type="text" id="uname" name="uname" required />
        <br /><br />

        <label>Password</label>
        <input type="password" id="password" name="password" required />
        <div id="messageContainer"></div>
        <br /><br />

        <button type="submit">Submit</button>
      </fieldset>
    </form>
  </body>

  <script>
    // Script to display error messages
    const form = document.getElementById("loginForm");
    const messageContainer = document.getElementById("messageContainer");

    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const username = document.querySelector("#uname").value;
      const password = document.querySelector("#password").value;

      const response = await fetch("/login", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          username,
          password,
        }),
      });

      const result = await response.json();

      if (result.success) {
        window.location.href = result.redirect; // Redirect on success
      } else {
        messageContainer.textContent = result.message;
      }
    });
  </script>
</html>
